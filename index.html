<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://cdn.jsdelivr.net/npm/danfojs@1.1.2/lib/bundle.js"></script>
<script src="https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/dist/ag-grid-community.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", (event) => {
const gridOptions = {
  // Data to be displayed
  pagination:true,
  rowData: [],
  // Columns to be displayed (Should match rowData properties)
  columnDefs: [
    {field:"fecha"},{field:"tipo_de_solicitud"},{field:"nombre_de_la_persona_o_institución_solicitante"},{field:"asesoría/derivaciones"},{field:"tipo_de_expediente"},{field:"n°_expediente"},{field:"sexo_solicitante"},{field:"edad_solicitante"},{field:"orientación_sexual_solicitante"},{field:"discapacidad_solicitante"},{field:"nacionalidad_solicitante"},{field:"etnia_solicitante"},{field:"etapa"},{field:"proceso"},{field:"subproceso"},{field:"sexo_indirecto"},{field:"edad_indirecto"},{field:"orientación_sexual_indirecto"},{field:"discapacidad_indirecto"},{field:"nacionalidad_indirecto"},{field:"etnia_indirecto"},{field:"expedientes_finalizados"},{field:"resultado"},{field:"montos"},{field:"mes"},{field:"pad"}
  ],
};

gridApi = agGrid.createGrid(document.querySelector("#myGrid"), gridOptions);

/*dfd.readCSV("https://raw.githubusercontent.com/pgrtiragg/tabs_files/refs/heads/master/nna-2024.tsv",{header:true,delimiter:'\t'})
.then( df=>{
   const headers = df.columns;
  
   const dynamic_headers = headers.map(field => ({ field }));
   
   const meses = ["enero","febrero","marzo"]

  const filter = df["mes"].values.map(mes=>meses.includes(mes));
  filtered= df.loc({ rows: filter })
  ///========================OK
  json=dfd.toJSON(filtered)  
  gridApi.setGridOption("columnDefs",dynamic_headers)
  gridApi.setGridOption("rowData", json)
  console.table(json)
})*/
fetch('https://raw.githubusercontent.com/pgrtiragg/tabs_files/refs/heads/master/nna-2024.json')
    .then(response => response.json())
    .then((data) => gridApi.setGridOption('rowData', data))
  
})

</script>
</head>
<div id="myGrid" style="width: 100%; height: 100vh"></div>


</html>
