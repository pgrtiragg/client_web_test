<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script src="https://cdn.jsdelivr.net/npm/danfojs@1.1.2/lib/bundle.js"></script>
<script src="https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/dist/ag-grid-community.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", (event) => {
const gridOptions = {
  // Data to be displayed
  pagination:true,
  rowData: [],
  // Columns to be displayed (Should match rowData properties)
  columnDefs: [
    //{field:"fecha"},{field:"tipo_de_solicitud"},{field:"nombre_de_la_persona_o_institución_solicitante"},{field:"asesoría/derivaciones"},{field:"tipo_de_expediente"},{field:"n°_expediente"},{field:"sexo_solicitante"},{field:"edad_solicitante"},{field:"orientación_sexual_solicitante"},{field:"discapacidad_solicitante"},{field:"nacionalidad_solicitante"},{field:"etnia_solicitante"},{field:"etapa"},{field:"proceso"},{field:"subproceso"},{field:"sexo_indirecto"},{field:"edad_indirecto"},{field:"orientación_sexual_indirecto"},{field:"discapacidad_indirecto"},{field:"nacionalidad_indirecto"},{field:"etnia_indirecto"},{field:"expedientes_finalizados"},{field:"resultado"},{field:"montos"},{field:"mes"},{field:"pad"}
   {field:"fecha"},{field:"nombre_de_la_persona_solicitante"},{field:"sexo_solicitante"},{field:"edad_solicitante"},{field:"orientación_sexual_solicitante"},{field:"discapacidad_solicitante"},{field:"nacionalidad_solicitante"},{field:"procedencia_solicitante"},{field:"etnia_solicitante"},{field:"asesoría"},{field:"tipo_de_expediente"},{field:"n°_expediente"},{field:"fase"},{field:"procesos"},{field:"subprocesos"},{field:"seguimiento_de_solicitudes_con_cita"},{field:"seguimiento_de_solicitudes_sin_cita"},{field:"conciliaciones_programadas"},{field:"conciliaciones_realizadas"},{field:"convenios"},{field:"fecha_de_recepción_de_pruebas_a_entregar"},{field:"¿entregó_prueba?"},{field:"resoluciones_administrativas"},{field:"recursos_en_fase_administrativa"},{field:"n°_de_oficio_o_n°_de_expediente"},{field:"fijaciones_en_instancias_judiciales"},{field:"monto_de_cuota_judicial"},{field:"amortización_de_mora_judicial"},{field:"fijación_de_cuota"},{field:"modalidad_de_pago"},{field:"monto_de_cuota_provisional"},{field:"monto_de_cuota_fijada_en_sede_administrativa"},{field:"amortización_de_mora_administrativa"},{field:"total_de_cuotas_fijadas_(judicial_y_administrativa)"},{field:"asignación_de_expedientes_en_fase_judicial"},{field:"calificación_de_prueba_en_fase_judicial"},{field:"fecha_de_presentación_de_caso_en_fase_judicial"},{field:"presentación_de_casos_en_fase_judicial"},{field:"si_hubo_admisión"},{field:"no_hubo_admisión"},{field:"prevención_de_admisiones"},{field:"recursos_de_admisones"},{field:"audiencias_judiciales_programadas"},{field:"audiencias_judiciales_asistidas"},{field:"aviso_ucft"},{field:"diligencias_finalizadas"},{field:"resultado_del_expediente_finalizado"},{field:"conclusión_del_expediente_en_actas"},{field:"conclusión_del_expediente_en_resoluciones"},{field:"conclusión_del_expediente_en_certificación_de_expediente_a_fgr"},{field:"conclusión_del_expediente_en_dejar_sin_efecto"},{field:"conclusión_del_expediente_que_han_sido_inadmisible"},{field:"conclusión_del_expediente_que_han_sido_improponible"},{field:"conclusión_del_expediente_que_han_sido_sentencia_definitiva"},{field:"otros"},{field:"sexo_indirectos"},{field:"edad_indirectos"},{field:"orientación_sexual_indirectos"},{field:"discapacidad_indirectos"},{field:"nacionalidad_indirectos"},{field:"procedencia_indirectos"},{field:"etnia_indirectos"},{field:"mes"},{field:"pad"}
  ],
};

gridApi = agGrid.createGrid(document.querySelector("#myGrid"), gridOptions);

/*dfd.readCSV("https://raw.githubusercontent.com/pgrtiragg/tabs_files/refs/heads/master/nna-2024.tsv",{header:true,delimiter:'\t'})
.then( df=>{
   const headers = df.columns;
  
   const dynamic_headers = headers.map(field => ({ field }));
   
   const meses = ["enero","febrero","marzo"]

  const filter = df["mes"].values.map(mes=>meses.includes(mes));
  filtered= df.loc({ rows: filter })
  ///========================OK
  json=dfd.toJSON(filtered)  
  gridApi.setGridOption("columnDefs",dynamic_headers)
  gridApi.setGridOption("rowData", json)
  console.table(json)
})*/
fetch('https://github.com/pgrtiragg/tabs_files/releases/download/published/familia-2024.json', {
	        'mode': 'cors',
	        'headers': {
            	'Access-Control-Allow-Origin': '*',
        	}
    	})
    .then(response => response.json())  
    .then((data) => gridApi.setGridOption('rowData', data))
  
})

</script>
</head>
<div id="myGrid" style="width: 100%; height: 100vh"></div>


</html>
